#!/bin/sh

set -e

export BABASHKA_DISABLE_SIGNAL_HANDLERS="true"
export XDG_CACHE_HOME=/opt/
export XDG_CONFIG_HOME=/opt/
export XDG_DATA_HOME=/opt/
export HOME=/var/task

if [ -z "$Entrypoint" ]; then
  echo "Environment variable \"Entrypoint\" is not set. Holy Lambda babashka runtime will fail!"
fi;

/opt/bb -Duser.home=/var/task -cp "$(cat /opt/classpath)" -m "$Entrypoint"
